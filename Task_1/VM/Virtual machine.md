## Команды виртуальной машины

- **BR**  
  Операция ветвления. Переход на заданную метку осуществляется, если заданные в операции флаги содержат текущее состояние condition регистра.

  Синтаксис:  
  BR(pzn) label, - p соответствует положительному флагу, z - нейтральному, n - отрицательному. Записи BR и BRpzn эквивалентны и осуществляют безусловный переход на метку.

  Битовое представление: 4 бита на код команды, 3 бита на флаги и 9 бит на сдвиг относительно следующей инструкции.

- **AND**  
  Операция побитового И между значениями двух регистров или регистра и заданного значения. Результат записывается в регистр.

  Синтаксис:  
  AND R1, R2, R3  ==  R1 <= (R2 & R3)  
  AND R1, R2, #7  ==  R1 <= (R2 & 7)

  Битовое представление: 4 бита на код команды, 3 бита на номер регистра, в который производится запись, 3 бита на номер регистра, содержащего первый аргумент, 1 бит на флаг режима и либо 3 последних бита содержат номер регистра, содержащего второй аргумент, либо 5 последних бит содержат второй аргумент.

  После этой операции производится проверка знака результата для записи в condition регистр.

- **NOT**  
  Операция побитового НЕ для регистра значениями двух регистров или регистра и заданного значения. Результат записывается в регистр.

  Синтаксис:  
  AND R1, R2  ==  R1 <= ~R2

  Битовое представление: 4 бита на код команды, 3 бита на номер регистра, в который производится запись, 3 бита на номер регистра, содержащего аргумент.

  После этой операции производится проверка знака результата для записи в condition 

- **ADD**  
  Операция сложения значений двух регистров или регистра и заданного значения. Результат записывается в регистр.

  Синтаксис:  
  ADD R1, R2, R3  ==  R1 <= (R2 + R3)  
  ADD R1, R2, #7  ==  R1 <= (R2 + 7)

  Битовое представление: 4 бита на код команды, 3 бита на номер регистра, в который производится запись, 3 бита на номер регистра, содержащего первый аргумент, 1 бит на флаг режима и либо 3 бита содержат номер регистра, содержащего второй аргумент, либо 5 бит содержат второй аргумент.

  После этой операции производится проверка знака результата для записи в condition регистр.

- **LD**  
  Операция загрузки данных из памяти в регистр.

  Синтаксис:  
  LD R1, R2  ==  R1 <= mem[R2]  
  LD R1, variable  ==  R1 <= mem[variable]

  Битовое представление: 4 бита на код команды, 3 бита на номер регистра, в который производится запись, 1 бит на флаг режима работы, 3 бита на номер регистра, который содержит адрес переменной в памяти, или 9 бит на адрес переменной в памяти. Адрес отсчитывается от начала файла (предполагается, что данные в файле лежат в следующем порядке: 2 байта ссылки на первую команду кода, переменные, код).

  После этой операции производится проверка знака результата для записи в condition регистр.

- **ST**  
  Операция сохранения данных из регистра в память.

  Синтаксис:  
  ST R1, R2  ==  R1 => mem[R2]  
  ST R1, variable  ==  R1 => mem[variable]

  Битовое представление: 4 бита на код команды, 3 бита на номер регистра, из которого производится чтение, 1 бит на флаг режима работы, 3 бита на номер регистра, который содержит адрес переменной в памяти, или 9 бит на адрес переменной в памяти. Адрес отсчитывается от начала файла (предполагается, что данные в файле лежат в следующем порядке: 2 байта ссылки на первую команду кода, переменные, код).

  После этой операции производится проверка знака результата для записи в condition регистр.

- **PRINT**  
  Операция вывода строки из памяти.

  Синтаксис:  
  PRINT R1  ==  print(mem[R1])  
  PRINT string  ==  print(mem[string])

  Битовое представление: 4 бита на код команды, 1 бит на флаг режима работы, 3 бита на номер регистра, который содержит адрес строки в памяти, или 12 бит на адрес строки в памяти. Адрес отсчитывается от начала файла (предполагается, что данные в файле лежат в следующем порядке: 2 байта ссылки на первую команду кода, переменные, код).

## Запуск виртуальной машины

Для запуска виртуальной машины ей в качестве аргумента нужно передать имя файлы с байт-кодом. Для программы, выводящей "Привет, мир!" это `hello_world.b`
